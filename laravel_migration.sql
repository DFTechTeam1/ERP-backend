
   INFO  Running migrations.  

  0001_01_01_000000_create_users_table .............................................................................................................  
  ⇂ create table `users` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `email` varchar(255) not null, `email_verified_at` timestamp null, `password` varchar(255) not null, `image` varchar(255) null, `last_login_at` timestamp null, `remember_token` varchar(100) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `users` add unique `users_email_unique`(`email`)  
  ⇂ create table `password_reset_tokens` (`email` varchar(255) not null, `token` varchar(255) not null, `created_at` timestamp null, primary key (`email`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ create table `sessions` (`id` varchar(255) not null, `user_id` bigint unsigned null, `ip_address` varchar(45) null, `user_agent` text null, `payload` longtext not null, `last_activity` int not null, primary key (`id`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `sessions` add index `sessions_user_id_index`(`user_id`)  
  ⇂ alter table `sessions` add index `sessions_last_activity_index`(`last_activity`)  
  0001_01_01_000001_create_cache_table .............................................................................................................  
  ⇂ create table `cache` (`key` varchar(255) not null, `value` mediumtext not null, `expiration` int not null, primary key (`key`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ create table `cache_locks` (`key` varchar(255) not null, `owner` varchar(255) not null, `expiration` int not null, primary key (`key`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  0001_01_01_000002_create_jobs_table ..............................................................................................................  
  ⇂ create table `jobs` (`id` bigint unsigned not null auto_increment primary key, `queue` varchar(255) not null, `payload` longtext not null, `attempts` tinyint unsigned not null, `reserved_at` int unsigned null, `available_at` int unsigned not null, `created_at` int unsigned not null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `jobs` add index `jobs_queue_index`(`queue`)  
  ⇂ create table `job_batches` (`id` varchar(255) not null, `name` varchar(255) not null, `total_jobs` int not null, `pending_jobs` int not null, `failed_jobs` int not null, `failed_job_ids` longtext not null, `options` mediumtext null, `cancelled_at` int null, `created_at` int not null, `finished_at` int null, primary key (`id`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ create table `failed_jobs` (`id` bigint unsigned not null auto_increment primary key, `uuid` varchar(255) not null, `connection` text not null, `queue` text not null, `payload` longtext not null, `exception` longtext not null, `failed_at` timestamp not null default CURRENT_TIMESTAMP) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `failed_jobs` add unique `failed_jobs_uuid_unique`(`uuid`)  
  CreateIndonesiaTable .............................................................................................................................  
  ⇂ create table `indonesia_provinces` (`code` char(2) not null, `name` varchar(255) not null, `latitude` varchar(255) null, `longitude` varchar(255) null, primary key (`code`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ create table `indonesia_cities` (`code` char(4) not null, `province_code` char(2) not null, `name` varchar(255) not null, `latitude` varchar(255) null, `longitude` varchar(255) null, primary key (`code`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `indonesia_cities` add constraint `indonesia_cities_province_code_foreign` foreign key (`province_code`) references `indonesia_provinces` (`code`) on delete restrict on update cascade  
  ⇂ create table `indonesia_districts` (`code` char(7) not null, `city_code` char(4) not null, `name` varchar(255) not null, `latitude` varchar(255) null, `longitude` varchar(255) null, primary key (`code`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `indonesia_districts` add constraint `indonesia_districts_city_code_foreign` foreign key (`city_code`) references `indonesia_cities` (`code`) on delete restrict on update cascade  
  ⇂ create table `indonesia_villages` (`code` char(10) not null, `district_code` char(7) not null, `name` varchar(255) not null, `latitude` varchar(255) null, `longitude` varchar(255) null, `postal_code` varchar(255) null, primary key (`code`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `indonesia_villages` add constraint `indonesia_villages_district_code_foreign` foreign key (`district_code`) references `indonesia_districts` (`code`) on delete restrict on update cascade  
  2024_03_27_154532_create_personal_access_tokens_table ............................................................................................  
  ⇂ create table `personal_access_tokens` (`id` bigint unsigned not null auto_increment primary key, `tokenable_type` varchar(255) not null, `tokenable_id` bigint unsigned not null, `name` varchar(255) not null, `token` varchar(64) not null, `abilities` text null, `last_used_at` timestamp null, `expires_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `personal_access_tokens` add index `personal_access_tokens_tokenable_type_tokenable_id_index`(`tokenable_type`, `tokenable_id`)  
  ⇂ alter table `personal_access_tokens` add unique `personal_access_tokens_token_unique`(`token`)  
  2024_03_28_023141_create_divisions_table .........................................................................................................  
  ⇂ create table `divisions` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `parent_id` int null, `created_at` timestamp null, `updated_at` timestamp null, `created_by` int null, `updated_by` int null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023308_create_positions_table .........................................................................................................  
  ⇂ create table `positions` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `name` varchar(255) not null, `division_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null, `created_by` int null, `updated_by` int null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `positions` add constraint `positions_division_id_foreign` foreign key (`division_id`) references `divisions` (`id`) on delete cascade  
  2024_03_28_023425_create_employees_table .........................................................................................................  
  ⇂ create table `employees` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `name` varchar(255) not null, `nickname` varchar(255) null, `email` varchar(255) not null, `phone` varchar(15) not null, `id_number` varchar(16) not null, `religion` enum('katholik', 'islam', 'kristen', 'budha', 'hindu', 'khonghucu') not null, `martial_status` enum('married', 'single') not null, `address` varchar(255) not null, `city_id` int null, `province_id` int null, `country_id` int null, `postal_code` varchar(6) not null, `current_address` varchar(255) null, `blood_type` varchar(2) null, `date_of_birth` date not null, `place_of_birth` varchar(255) not null, `dependant` varchar(10) null comment 'tanggungan', `gender` enum('female', 'male') not null, `bank_detail` json null comment 'Format: [{\"bank_name\": \"\", \"account_number\": \"\", \"account_holder_name\": \"\", \"is_active\": \"\"}]', `relation_contact` json null comment 'Format: {\"name\": \"\", \"phone\": \"\", \"relationship\": \"\"}', `education` enum('smp', 'sma', 'smk', 'diploma', 's1', 's2', 's3') not null, `education_name` varchar(255) null, `education_major` varchar(255) null, `education_year` year null, `position_id` bigint unsigned not null, `boss_id` int null, `level_staff` enum('manager', 'staff', 'lead', 'junior_staff') not null, `status` tinyint not null comment '1 for permanenet, 2 for contract, 3 for part time, 4 for freelance, 5 for internship, 6 for inactive, 7 for waiting HR checking (usually comes from self-filling after the contract)', `placement` varchar(255) null, `join_date` date not null, `start_review_probation_date` date null, `probation_status` tinyint null, `end_probation_date` date null, `company_name` varchar(255) null, `bpjs_status` tinyint null, `bpjs_ketenagakerjaan_number` varchar(50) null, `bpjs_kesehatan_number` varchar(50) null, `npwp_number` varchar(50) null, `bpjs_photo` varchar(255) null, `npwp_photo` varchar(255) null, `id_number_photo` varchar(255) null, `kk_photo` varchar(255) null, `created_by` int null, `updated_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employees` add constraint `employees_position_id_foreign` foreign key (`position_id`) references `positions` (`id`)  
  2024_03_28_023529_create_document_templates_table ................................................................................................  
  ⇂ create table `document_templates` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023536_create_notification_templates_table ............................................................................................  
  ⇂ create table `notification_templates` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023629_create_units_table .............................................................................................................  
  ⇂ create table `units` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023641_create_brands_table ............................................................................................................  
  ⇂ create table `brands` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023647_create_suppliers_table .........................................................................................................  
  ⇂ create table `suppliers` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023658_create_inventories_table .......................................................................................................  
  ⇂ create table `inventories` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023705_create_inventory_positions_table ...............................................................................................  
  ⇂ create table `inventory_positions` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023713_create_inventory_position_histories_table ......................................................................................  
  ⇂ create table `inventory_position_histories` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023725_create_inventory_requests_table ................................................................................................  
  ⇂ create table `inventory_requests` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023733_create_inventory_request_items_table ...........................................................................................  
  ⇂ create table `inventory_request_items` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023746_create_inventory_maintenance_requests_table ....................................................................................  
  ⇂ create table `inventory_maintenance_requests` (`id` bigint unsigned not null auto_increment primary key, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_28_023811_create_settings_table ..........................................................................................................  
  ⇂ create table `settings` (`id` bigint unsigned not null auto_increment primary key, `key` varchar(255) null, `value` longtext null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_03_29_222330_create_permission_tables .......................................................................................................  
  ⇂ create table `permissions` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `guard_name` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `permissions` add unique `permissions_name_guard_name_unique`(`name`, `guard_name`)  
  ⇂ create table `roles` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `guard_name` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `roles` add unique `roles_name_guard_name_unique`(`name`, `guard_name`)  
  ⇂ create table `model_has_permissions` (`permission_id` bigint unsigned not null, `model_type` varchar(255) not null, `model_id` bigint unsigned not null, primary key (`permission_id`, `model_id`, `model_type`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `model_has_permissions` add index `model_has_permissions_model_id_model_type_index`(`model_id`, `model_type`)  
  ⇂ alter table `model_has_permissions` add constraint `model_has_permissions_permission_id_foreign` foreign key (`permission_id`) references `permissions` (`id`) on delete cascade  
  ⇂ create table `model_has_roles` (`role_id` bigint unsigned not null, `model_type` varchar(255) not null, `model_id` bigint unsigned not null, primary key (`role_id`, `model_id`, `model_type`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `model_has_roles` add index `model_has_roles_model_id_model_type_index`(`model_id`, `model_type`)  
  ⇂ alter table `model_has_roles` add constraint `model_has_roles_role_id_foreign` foreign key (`role_id`) references `roles` (`id`) on delete cascade  
  ⇂ create table `role_has_permissions` (`permission_id` bigint unsigned not null, `role_id` bigint unsigned not null, primary key (`permission_id`, `role_id`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `role_has_permissions` add constraint `role_has_permissions_permission_id_foreign` foreign key (`permission_id`) references `permissions` (`id`) on delete cascade  
  ⇂ alter table `role_has_permissions` add constraint `role_has_permissions_role_id_foreign` foreign key (`role_id`) references `roles` (`id`) on delete cascade  
  ⇂ delete from `cache` where `key` in ('spatie.permission.cache', 'illuminate:cache:flexible:created:spatie.permission.cache')  
  2024_04_02_015842_alter_columns_to_inventories_table .............................................................................................  
  ⇂ alter table `brands` add `uid` char(36) not null  
  ⇂ alter table `brands` add `name` varchar(255) not null  
  ⇂ alter table `suppliers` add `uid` char(36) not null  
  ⇂ alter table `suppliers` add `name` varchar(255) not null  
  ⇂ alter table `inventories` add `uid` char(36) not null  
  ⇂ alter table `inventories` add `name` varchar(255) not null  
  ⇂ alter table `inventories` add `inventory_code` varchar(20) not null  
  ⇂ alter table `inventories` add `item_type` int not null  
  ⇂ alter table `inventories` add `brand_id` int not null  
  ⇂ alter table `inventories` add `supplier_id` int not null  
  ⇂ alter table `inventories` add `qrcode` varchar(255) null  
  ⇂ alter table `inventories` add `description` text null  
  ⇂ alter table `inventories` add `warranty` tinyint null comment 'in years'  
  ⇂ alter table `inventories` add `year_of_purchase` year null  
  ⇂ alter table `inventories` add `purchase_price` double not null default '0'  
  ⇂ alter table `inventories` add `status` tinyint not null comment '1 for in use, 2 for in repair, 3 for broke, 4 for disposal'  
  ⇂ alter table `inventories` add `created_by` int null  
  ⇂ alter table `inventories` add `updated_by` int null  
  2024_04_02_035438_add_uid_column_to_divisions_table ..............................................................................................  
  ⇂ alter table `divisions` add `uid` char(36) null  
  2024_04_06_104414_alter_column_to_units_table ....................................................................................................  
  ⇂ alter table `units` add `uid` char(36) not null after `id`  
  ⇂ alter table `units` add `name` varchar(255) not null after `uid`  
  2024_04_15_091206_alter_unit_id_to_inventories_table .............................................................................................  
  ⇂ alter table `inventories` add `unit_id` int null after `supplier_id`  
  2024_04_15_091918_create_inventory_images_table ..................................................................................................  
  ⇂ create table `inventory_images` (`id` bigint unsigned not null auto_increment primary key, `inventory_id` bigint unsigned not null, `image` varchar(255) not null, `is_main` tinyint(1) not null default '0', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `inventory_images` add constraint `inventory_images_inventory_id_foreign` foreign key (`inventory_id`) references `inventories` (`id`) on delete cascade  
  2024_04_15_100300_create_inventory_types_table ...................................................................................................  
  ⇂ create table `inventory_types` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `name` varchar(255) not null, `slug` varchar(20) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_04_15_135702_create_inventory_items_table ...................................................................................................  
  ⇂ create table `inventory_items` (`id` bigint unsigned not null auto_increment primary key, `inventory_id` bigint unsigned not null, `inventory_code` varchar(50) not null, `status` tinyint not null comment '1 for in use, 2 for in repair, 3 for broke, 4 for disposal', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `inventory_items` add constraint `inventory_items_inventory_id_foreign` foreign key (`inventory_id`) references `inventories` (`id`) on delete cascade  
  2024_04_15_135722_delete_columns_in_inventories_table ............................................................................................  
  ⇂ alter table `inventories` drop `inventory_code`  
  ⇂ alter table `inventories` drop `status`  
  ⇂ alter table `inventories` drop `qrcode`  
  2024_04_22_103951_alter_current_location_to_inventory_types_table ................................................................................  
  ⇂ alter table `inventory_items` add `current_location` tinyint null comment '1 for in user, 2 for in warehouse, 3 for in outside'  
  2024_04_22_125910_change_supplier_id_column_type_in_inventories_table ............................................................................  
  ⇂ alter table `inventories` modify `supplier_id` int null  
  2024_04_25_125036_alter_stock_to_inventories_table ...............................................................................................  
  ⇂ alter table `inventories` add `stock` double not null default '0' after `name`  
  2024_04_26_101413_change_year_type_in_inventories_table ..........................................................................................  
  ⇂ alter table `inventories` modify `year_of_purchase` year null  
  2024_05_02_103820_alter_soft_delete_to_employees_table ...........................................................................................  
  ⇂ alter table `employees` add `deleted_at` timestamp null  
  2024_05_02_161601_alter_employee_id_to_employees_table ...........................................................................................  
  ⇂ alter table `employees` add `employee_id` varchar(150) not null  
  2024_05_03_090909_alter_change_address_region_in_employees_table .................................................................................  
  ⇂ alter table `employees` drop `country_id`  
  ⇂ alter table `employees` drop `province_id`  
  ⇂ alter table `employees` drop `city_id`  
  ⇂ alter table `employees` add `province_id` int null  
  ⇂ alter table `employees` add `city_id` int null  
  ⇂ alter table `employees` add `district_id` bigint null  
  ⇂ alter table `employees` add `village_id` bigint null  
  2024_05_06_114512_alter_user_id_to_inventory_items_table .........................................................................................  
  ⇂ alter table `inventory_items` add `user_id` int null  
  2024_05_06_133848_alter_user_id_to_employees_table ...............................................................................................  
  ⇂ alter table `employees` add `user_id` int null  
  2024_05_10_091241_create_user_login_histories_table ..............................................................................................  
  ⇂ create table `user_login_histories` (`id` bigint unsigned not null auto_increment primary key, `user_id` int not null, `login_at` timestamp not null, `ip` varchar(100) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_05_10_100440_create_line_messages_table .....................................................................................................  
  ⇂ create table `line_messages` (`id` bigint unsigned not null auto_increment primary key, `type` varchar(255) null, `user_id` varchar(255) null, `message` json not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_05_10_113033_alter_group_to_permissions_table ...............................................................................................  
  ⇂ alter table `permissions` add `group` varchar(255) null  
  2024_05_11_142807_create_menus_table .............................................................................................................  
  ⇂ create table `menus` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `parent_id` int null, `icon` varchar(255) null, `group` varchar(255) not null, `link` varchar(255) null, `permission` varchar(255) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_05_14_095134_alter_code_to_settings_table ...................................................................................................  
  ⇂ alter table `settings` add `code` varchar(255) null  
  2024_05_14_190822_create_addons_table ............................................................................................................  
  ⇂ create table `addons` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `description` text null, `preview_img` varchar(255) not null, `tutorial_video` varchar(255) null, `main_file` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_05_14_190846_create_addon_update_histories_table ............................................................................................  
  ⇂ create table `addon_update_histories` (`id` bigint unsigned not null auto_increment primary key, `addon_id` int not null, `improvements` longtext not null, `created_by` int null, `updated_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_05_15_123456_create_projects_table ..........................................................................................................  
  ⇂ create table `projects` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `client_portal` varchar(255) not null, `project_date` date not null, `event_type` enum('wedding', 'engagement', 'event', 'birthday', 'concert', 'corporate', 'exhibition') null, `venue` varchar(255) not null, `marketing_id` int null, `collaboration` varchar(255) null, `note` varchar(255) null, `status` tinyint not null comment '1 for active-ongoing, 2 is draft, 3 for done, 4 for waiting approval, 5 completed, 6 for cancel', `classification` enum('s', 'a', 'b', 'c', 'd') null, `created_by` int null, `updated_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_05_15_123531_create_project_person_in_charges_table .........................................................................................  
  ⇂ create table `project_person_in_charges` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `pic_id` int not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_person_in_charges` add constraint `project_person_in_charges_project_id_foreign` foreign key (`project_id`) references `projects` (`id`)  
  2024_05_20_084844_alter_led_to_projects_table ....................................................................................................  
  ⇂ alter table `projects` add `led_area` double not null default '0'  
  ⇂ alter table `projects` add `led_detail` json null  
  2024_05_20_090150_create_project_boards_table ....................................................................................................  
  ⇂ create table `project_boards` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `name` varchar(255) not null, `sort` varchar(2) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_boards` add constraint `project_boards_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  2024_05_20_122435_alter_uid_to_projects_table ....................................................................................................  
  ⇂ alter table `projects` add `uid` char(36) not null  
  2024_05_20_125446_create_project_references_table ................................................................................................  
  ⇂ create table `project_references` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `media_path` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_references` add constraint `project_references_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  2024_05_20_195134_alter_is_external_user_to_users_table ..........................................................................................  
  ⇂ alter table `users` add `is_external_user` tinyint(1) not null default '0'  
  2024_05_22_033834_change_group_column_type_in_menus_table ........................................................................................  
  ⇂ alter table `menus` drop `group`  
  ⇂ alter table `menus` add `group` tinyint not null  
  2024_05_23_094930_change_table_structure_in_project_references_table .............................................................................  
  ⇂ alter table `project_references` add `name` varchar(255) null  
  ⇂ alter table `project_references` add `type` varchar(100) null  
  2024_05_25_074343_create_project_tasks_table .....................................................................................................  
  ⇂ create table `project_tasks` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `project_id` bigint unsigned not null, `project_board_id` bigint unsigned not null, `start_date` date null, `end_date` date null, `description` text null, `name` varchar(255) not null, `start_working_at` datetime null, `created_by` int null, `updated_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_tasks` add constraint `project_tasks_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  ⇂ alter table `project_tasks` add constraint `project_tasks_project_board_id_foreign` foreign key (`project_board_id`) references `project_boards` (`id`) on delete cascade  
  2024_05_25_090801_create_telescope_entries_table .................................................................................................  
  ⇂ create table `telescope_entries` (`sequence` bigint unsigned not null auto_increment primary key, `uuid` char(36) not null, `batch_id` char(36) not null, `family_hash` varchar(255) null, `should_display_on_index` tinyint(1) not null default '1', `type` varchar(20) not null, `content` longtext not null, `created_at` datetime null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `telescope_entries` add unique `telescope_entries_uuid_unique`(`uuid`)  
  ⇂ alter table `telescope_entries` add index `telescope_entries_batch_id_index`(`batch_id`)  
  ⇂ alter table `telescope_entries` add index `telescope_entries_family_hash_index`(`family_hash`)  
  ⇂ alter table `telescope_entries` add index `telescope_entries_created_at_index`(`created_at`)  
  ⇂ alter table `telescope_entries` add index `telescope_entries_type_should_display_on_index_index`(`type`, `should_display_on_index`)  
  ⇂ create table `telescope_entries_tags` (`entry_uuid` char(36) not null, `tag` varchar(255) not null, primary key (`entry_uuid`, `tag`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `telescope_entries_tags` add index `telescope_entries_tags_tag_index`(`tag`)  
  ⇂ alter table `telescope_entries_tags` add constraint `telescope_entries_tags_entry_uuid_foreign` foreign key (`entry_uuid`) references `telescope_entries` (`uuid`) on delete cascade  
  ⇂ create table `telescope_monitoring` (`tag` varchar(255) not null, primary key (`tag`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_05_26_004543_create_project_task_pics_table .................................................................................................  
  ⇂ create table `project_task_pics` (`id` bigint unsigned not null auto_increment primary key, `project_task_id` bigint unsigned not null, `employee_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_pics` add constraint `project_task_pics_project_task_id_foreign` foreign key (`project_task_id`) references `project_tasks` (`id`) on delete cascade  
  ⇂ alter table `project_task_pics` add constraint `project_task_pics_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`) on delete cascade  
  2024_05_29_142914_alter_line_id_to_employees_table ...............................................................................................  
  ⇂ alter table `employees` add `line_id` varchar(255) null  
  2024_05_29_173408_create_project_equipment_table .................................................................................................  
  ⇂ create table `project_equipment` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `project_id` bigint unsigned not null, `inventory_id` int not null, `qty` int not null, `status` tinyint not null comment '1 for ready, 2 for requested, 3 for decline', `project_date` date not null, `created_by` int null, `updated_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_equipment` add constraint `project_equipment_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  2024_06_03_102229_change_nullable_description_in_inventories_table ...............................................................................  
  ⇂ alter table `inventories` modify `description` text null  
  2024_06_04_173306_alter_task_type_to_project_tasks_table .........................................................................................  
  ⇂ alter table `project_tasks` add `task_type` enum('asset3d', 'compositing', 'animating', 'finalize') null  
  2024_06_07_110545_alter_is_checked_pic_to_project_equipment_table ................................................................................  
  ⇂ alter table `project_equipment` add `is_checked_pic` tinyint(1) not null default '0'  
  2024_06_08_063217_create_project_task_attachments_table ..........................................................................................  
  ⇂ create table `project_task_attachments` (`id` bigint unsigned not null auto_increment primary key, `project_task_id` bigint unsigned not null, `project_id` bigint unsigned not null, `media` varchar(255) null, `display_name` varchar(255) null, `related_task_id` int null, `type` tinyint not null comment '1 for media, 2 for other task link, 3 for external link', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_attachments` add constraint `project_task_attachments_project_task_id_foreign` foreign key (`project_task_id`) references `project_tasks` (`id`) on delete cascade  
  ⇂ alter table `project_task_attachments` add constraint `project_task_attachments_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  2024_06_11_111306_alter_based_board_id_to_project_boards_table ...................................................................................  
  ⇂ alter table `project_boards` add `based_board_id` int null  
  2024_06_18_090130_create_project_task_logs_table .................................................................................................  
  ⇂ create table `project_task_logs` (`id` bigint unsigned not null auto_increment primary key, `project_task_id` int null, `type` varchar(255) null, `text` varchar(255) null, `user_id` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_06_18_090846_alter_username_to_users_table ..................................................................................................  
  ⇂ alter table `users` add `username` varchar(255) null  
  2024_06_19_091612_create_project_task_proof_of_works_table .......................................................................................  
  ⇂ create table `project_task_proof_of_works` (`id` bigint unsigned not null auto_increment primary key, `project_task_id` bigint unsigned not null, `project_id` int not null, `nas_link` varchar(255) null, `preview_image` json null, `created_by` int null, `updated_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_proof_of_works` add constraint `project_task_proof_of_works_project_task_id_foreign` foreign key (`project_task_id`) references `project_tasks` (`id`) on delete cascade  
  2024_06_20_091651_alter_performance_time_to_project_tasks_table ..................................................................................  
  ⇂ alter table `project_tasks` add `performance_time` json null comment 'will be [{type: \'on_progress\', start_at: \'2024-05-24 20:00:00\', end_at: \'\'}]. and will be have type: on_progress, review_by_pm, review_by_client'  
  2024_06_21_084657_create_project_task_worktimes_table ............................................................................................  
  ⇂ create table `project_task_worktimes` (`id` bigint unsigned not null auto_increment primary key, `project_task_id` bigint unsigned not null, `employee_id` int null, `user_id` int null, `project_id` int null, `start_at` timestamp null, `end_at` timestamp null, `work_type` enum('on_progress', 'review_by_pm', 'review_by_client') null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_worktimes` add constraint `project_task_worktimes_project_task_id_foreign` foreign key (`project_task_id`) references `project_tasks` (`id`) on delete cascade  
  2024_06_27_105721_create_project_marketings_table ................................................................................................  
  ⇂ create table `project_marketings` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `marketing_id` int not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_marketings` add constraint `project_marketings_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  2024_06_27_125841_change_task_type_column_type_in_project_tasks_table ............................................................................  

  2024_06_27_145215_alter_status_to_projet_task_pics ...............................................................................................  
  ⇂ alter table `project_task_pics` add `status` varchar(1) null  
  2024_06_28_085902_alter_employee_id_to_users_table ...............................................................................................  
  ⇂ alter table `users` add `employee_id` int null  
  2024_06_28_105056_alter_approved_time_to_project_task_pics_table .................................................................................  
  ⇂ alter table `project_task_pics` add `assigned_at` timestamp null  
  ⇂ alter table `project_task_pics` add `approved_at` timestamp null  
  2024_06_29_075310_create_project_task_pic_logs_table .............................................................................................  
  ⇂ create table `project_task_pic_logs` (`id` bigint unsigned not null auto_increment primary key, `project_task_id` bigint unsigned not null, `employee_id` int not null, `work_type` varchar(30) not null comment 'will be: assigned, on_progress, check_by_pm, revise, finish', `time_added` timestamp not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_pic_logs` add constraint `project_task_pic_logs_project_task_id_foreign` foreign key (`project_task_id`) references `project_tasks` (`id`) on delete cascade  
  2024_07_01_094841_alter_status_to_project_tasks_table ............................................................................................  
  ⇂ alter table `project_tasks` add `status` tinyint null comment '1 for on process, 2 for check by pm, 3 for revise, 4 for completed'  
  2024_07_01_122154_alter_current_pics_to_project_tasks_table ......................................................................................  
  ⇂ alter table `project_tasks` add `current_pics` json null comment 'This column will be update in every task movement. Format will be array of id like [1,2,3]'  
  2024_07_04_094811_create_project_task_revise_histories_table .....................................................................................  
  ⇂ create table `project_task_revise_histories` (`id` bigint unsigned not null auto_increment primary key, `project_task_id` bigint unsigned not null, `project_id` int null, `selected_user` json null comment 'who is working on this revise task', `reason` varchar(255) null, `file` varchar(255) null, `revise_by` int null comment 'who is create this revise reason (base on employee id)', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_revise_histories` add constraint `project_task_revise_histories_project_task_id_foreign` foreign key (`project_task_id`) references `project_tasks` (`id`) on delete cascade  
  2024_07_04_100900_alter_current_board_to_project_tasks_table .....................................................................................  
  ⇂ alter table `project_tasks` add `current_board` int null  
  2024_07_21_204616_create_transfer_team_members_table .............................................................................................  
  ⇂ create table `transfer_team_members` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `project_id` bigint unsigned not null, `employee_id` int not null, `request_to` int not null, `reason` varchar(255) not null, `project_date` date not null, `request_at` timestamp null, `approved_at` timestamp null, `completed_at` timestamp null, `rejected_at` timestamp null, `canceled_at` timestamp null, `reject_reason` varchar(255) null, `device_action` varchar(10) null comment 'device resource for any action take. It should line or web', `status` tinyint not null comment '1 for requested, 2 for approved, 3 for reject, 4 completed', `requested_by` int not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `transfer_team_members` add constraint `transfer_team_members_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  2024_07_23_044143_alter_showreels_to_projects_table ..............................................................................................  
  ⇂ alter table `projects` add `showreels` varchar(255) null  
  2024_07_26_132801_alter_region_to_projects_table .................................................................................................  
  ⇂ alter table `projects` add `country_id` int null  
  ⇂ alter table `projects` add `state_id` int null  
  ⇂ alter table `projects` add `city_id` int null  
  2024_07_27_042557_alter_city_name_to_project_table ...............................................................................................  
  ⇂ alter table `projects` add `city_name` varchar(255) null  
  2024_07_27_063709_alter_is_employee_to_users_table ...............................................................................................  
  ⇂ alter table `users` add `is_employee` tinyint(1) null  
  ⇂ alter table `users` add `is_project_manager` tinyint(1) null  
  ⇂ alter table `users` add `is_director` tinyint(1) null  
  2024_07_27_090058_create_employee_task_points_table ..............................................................................................  
  ⇂ create table `employee_task_points` (`id` bigint unsigned not null auto_increment primary key, `employee_id` int not null, `point` float(53) not null, `additional_point` float(53) not null default '0', `total_point` float(53) not null default '0', `total_task` float(53) not null default '0', `project_id` int not null, `created_by` int not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_07_27_092706_create_project_task_pic_histories_table ........................................................................................  
  ⇂ create table `project_task_pic_histories` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `project_task_id` bigint unsigned not null, `employee_id` int not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_pic_histories` add constraint `project_task_pic_histories_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  ⇂ alter table `project_task_pic_histories` add constraint `project_task_pic_histories_project_task_id_foreign` foreign key (`project_task_id`) references `project_tasks` (`id`) on delete cascade  
  2024_07_27_145201_alter_warehouse_id_to_inventories_table ........................................................................................  
  ⇂ alter table `inventories` add `warehouse_id` tinyint null comment 'Static id. 1 for office, 2 for entertaint'  
  2024_07_29_104821_create_custom_inventories_table ................................................................................................  
  ⇂ create table `custom_inventories` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `build_series` varchar(255) not null, `name` varchar(255) not null, `type` varchar(255) not null, `location` tinyint not null, `default_request_item` tinyint not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_07_29_105041_create_custom_inventory_details_table ..........................................................................................  
  ⇂ create table `custom_inventory_details` (`id` bigint unsigned not null auto_increment primary key, `custom_inventory_id` bigint unsigned not null, `inventory_id` int not null, `qty` int not null, `price` double not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `custom_inventory_details` add constraint `custom_inventory_details_custom_inventory_id_foreign` foreign key (`custom_inventory_id`) references `custom_inventories` (`id`) on delete cascade  
  2024_07_30_032954_create_world_region_table ......................................................................................................  
  ⇂ create table `countries` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `iso3` varchar(255) not null, `iso2` varchar(255) not null, `phone_code` varchar(255) not null, `currency` varchar(255) not null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ create table `states` (`id` bigint unsigned not null auto_increment primary key, `country_id` bigint not null, `name` varchar(255) not null, `country_code` varchar(255) not null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ create table `cities` (`id` bigint unsigned not null auto_increment primary key, `country_id` bigint not null, `state_id` bigint not null, `name` varchar(255) not null, `country_code` varchar(255) not null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_08_01_114216_alter_is_approve_to_project_tasks_table ........................................................................................  
  ⇂ alter table `project_tasks` add `is_approved` tinyint not null default '0'  
  2024_08_04_195042_create_notifications_table .....................................................................................................  
  ⇂ create table `notifications` (`id` char(36) not null, `type` varchar(255) not null, `notifiable_type` varchar(255) not null, `notifiable_id` bigint unsigned not null, `data` text not null, `read_at` timestamp null, `created_at` timestamp null, `updated_at` timestamp null, primary key (`id`)) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `notifications` add index `notifications_notifiable_type_notifiable_id_index`(`notifiable_type`, `notifiable_id`)  
  2024_08_05_084909_create_project_classes_table ...................................................................................................  
  ⇂ create table `project_classes` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `maximal_point` tinyint not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_08_05_102841_alter_project_class_id_to_projects_table .......................................................................................  
  ⇂ alter table `projects` drop `classification`  
  ⇂ alter table `projects` add `project_class_id` int null  
  ⇂ alter table `projects` add `classification` varchar(255) null  
  2024_08_12_122717_create_project_vjs_table .......................................................................................................  
  ⇂ create table `project_vjs` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `employee_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null, `created_by` int not null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_vjs` add constraint `project_vjs_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  ⇂ alter table `project_vjs` add constraint `project_vjs_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`) on delete cascade  
  2024_08_15_103228_alter_qrcode_to_inventory_items_table ..........................................................................................  
  ⇂ alter table `inventory_items` add `qrcode` varchar(255) null  
  2024_08_16_105948_alter_folder_to_project_references_table .......................................................................................  
  ⇂ alter table `project_references` add `folder` varchar(150) null  
  2024_08_19_092908_alter_showreels_status_to_projects_table .......................................................................................  
  ⇂ alter table `projects` add `showreels_status` tinyint null  
  2024_08_19_105338_alter_inventory_code_to_project_equipment_table ................................................................................  
  ⇂ alter table `project_equipment` add `inventory_code` varchar(30) null  
  2024_08_20_101119_alter_return_detail_to_project_equipment_table .................................................................................  
  ⇂ alter table `project_equipment` add `is_good_condition` tinyint(1) null  
  ⇂ alter table `project_equipment` add `detail_condition` varchar(255) null  
  ⇂ alter table `project_equipment` add `is_returned` tinyint(1) null  
  2024_08_21_135147_alter_lang_id_to_menus_table ...................................................................................................  
  ⇂ alter table `menus` add `lang_id` varchar(255) null  
  ⇂ alter table `menus` add `lang_en` varchar(255) null  
  2024_08_22_204033_alter_reset_password_token_to_users_table ......................................................................................  
  ⇂ alter table `users` add `reset_password_token_exp` timestamp null  
  ⇂ alter table `users` add `reset_password_token_claim` tinyint(1) null  
  2024_08_23_093525_alter_browser_to_users_table ...................................................................................................  
  ⇂ alter table `user_login_histories` add `browser` varchar(200) null  
  2024_08_24_125749_create_employee_families_table .................................................................................................  
  ⇂ create table `employee_families` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `employee_id` bigint unsigned not null, `name` varchar(255) not null, `relation` varchar(255) null, `date_of_birth` date null, `id_number` varchar(16) not null, `gender` varchar(10) null, `job` varchar(255) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_families` add constraint `employee_families_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`) on delete cascade  
  2024_08_24_152106_create_employee_emergecny_contacts_table .......................................................................................  
  ⇂ create table `employee_emergency_contacts` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `phone` varchar(255) not null, `relation` varchar(255) not null, `uid` char(36) not null, `employee_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_emergency_contacts` add constraint `employee_emergency_contacts_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`) on delete cascade  
  2024_08_28_120105_alter_change_status_nullable_to_projects_table .................................................................................  
  ⇂ alter table `projects` modify `status` tinyint null  
  ⇂ alter table `projects` modify `note` text null  
  2024_09_08_155615_alter_color_to_project_classes_table ...........................................................................................  
  ⇂ alter table `project_classes` add `color` varchar(20) null  
  2024_09_09_104523_alter_coordinate_to_projects_table .............................................................................................  
  ⇂ alter table `projects` add `longitude` varchar(150) null  
  ⇂ alter table `projects` add `latitude` varchar(150) null  
  2024_09_13_110335_alter_year_month_to_project_task_proof_of_works_table ..........................................................................  
  ⇂ alter table `project_task_proof_of_works` add `created_year` year null  
  ⇂ alter table `project_task_proof_of_works` add `created_month` tinyint null  
  2024_09_18_095436_alter_alternative_employee_id_to_transfer_team_members .........................................................................  
  ⇂ alter table `transfer_team_members` add `alternative_employee_id` int null  
  2024_09_19_114727_alter_end_date_to_employees_table ..............................................................................................  
  ⇂ alter table `employees` add `end_date` date null  
  ⇂ alter table `employees` add `resign_reason` varchar(255) null  
  2024_09_23_095047_modify_transfer_team_members_table .............................................................................................  
  ⇂ alter table `transfer_team_members` add `is_entertainment` tinyint(1) not null default '0'  
  ⇂ alter table `transfer_team_members` modify `employee_id` int null  
  2024_10_07_125130_create_form_interactives_table .................................................................................................  
  ⇂ create table `form_interactives` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `name` varchar(255) not null, `forms` json not null, `qrcode` varchar(255) null, `background` varchar(255) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_10_08_142431_create_form_interactive_responses_table ........................................................................................  
  ⇂ create table `form_interactive_responses` (`id` bigint unsigned not null auto_increment primary key, `form_interactive_id` int not null, `response` json not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_10_09_095549_alter_price_and_more_to_inventory_items_table ..................................................................................  
  ⇂ alter table `inventory_items` add `purchase_price` double not null  
  ⇂ alter table `inventory_items` add `warranty` int null  
  ⇂ alter table `inventory_items` add `year_of_purchase` year null  
  2024_10_12_094508_alter_feedback_to_projects_table ...............................................................................................  
  ⇂ alter table `projects` add `feedback` text null  
  2024_10_12_125809_create_user_encrypted_tokens_table .............................................................................................  
  ⇂ create table `user_encrypted_tokens` (`id` bigint unsigned not null auto_increment primary key, `user_id` int not null, `data` longtext not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_10_18_101835_alter_app_type_to_menus_table ..................................................................................................  
  ⇂ alter table `menus` add `app_type` varchar(100) null default 'old' comment 'as a marker whether the menu is displayed in the application with the old or new design. if office then new, other than that is the old display'  
  2024_10_21_102722_alter_new_icon_to_menus_table ..................................................................................................  
  ⇂ alter table `menus` add `new_icon` varchar(255) null  
  2024_10_21_103921_alter_new_link_to_menus_table ..................................................................................................  
  ⇂ alter table `menus` add `new_link` varchar(255) null  
  2024_10_25_093522_change_inventory_id_column_to_custom_inventory_details_table ...................................................................  
  ⇂ select exists(select * from `information_schema`.`KEY_COLUMN_USAGE` where `TABLE_NAME` = 'custom_inventory_details' and `COLUMN_NAME` = 'inventory_id' and `TABLE_SCHEMA` = 'erp_testing_new') as `exists`  
  2024_10_25_133641_alter_barcode_path_to_custom_inventories_table .................................................................................  
  ⇂ alter table `custom_inventories` add `barcode` varchar(255) null after `id`  
  2024_10_26_010351_create_request_inventories_table ...............................................................................................  
  ⇂ create table `request_inventories` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `name` varchar(255) not null, `description` text null, `price` double not null default '0', `quantity` tinyint not null default '0', `purchase_source` varchar(255) null, `purchase_link` json null, `status` tinyint not null default '1' comment '1 for requested, 2 for approved, 3 for rejected', `requested_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_10_26_100631_alter_approval_target_to_request_inventories_table .............................................................................  
  ⇂ alter table `request_inventories` add `approval_target` json null  
  2024_10_27_010958_alter_store_name_to_request_inventories_table ..................................................................................  
  ⇂ alter table `request_inventories` add `store_name` varchar(255) null  
  2024_10_29_093939_alter_telegram_chat_id_to_employees_table ......................................................................................  
  ⇂ alter table `employees` add `telegram_chat_id` varchar(255) null  
  2024_10_30_092044_create_telegram_chat_histories_table ...........................................................................................  
  ⇂ create table `telegram_chat_histories` (`id` bigint unsigned not null auto_increment primary key, `chat_id` varchar(255) not null, `message` text not null, `message_id` varchar(255) null, `status` tinyint not null default '1' comment '1 for processing, 2 for success, 3 for failed', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_10_30_094906_alter_bot_checker_to_telegram_chat_histories_table .............................................................................  
  ⇂ alter table `telegram_chat_histories` add `chat_type` varchar(255) null  
  ⇂ alter table `telegram_chat_histories` add `bot_command` varchar(255) null  
  2024_10_30_100017_alter_sender_to_telegram_chat_histories_table ..................................................................................  
  ⇂ alter table `telegram_chat_histories` add `from_customer` tinyint(1) not null default '0'  
  2024_10_30_132238_alter_closed_to_telegram_chat_histories_table ..................................................................................  
  ⇂ alter table `telegram_chat_histories` add `is_closed` tinyint(1) not null default '0'  
  2024_11_02_105920_alter_approved_by_to_request_inventories_table .................................................................................  
  ⇂ alter table `request_inventories` add `approved_by` int null  
  ⇂ alter table `request_inventories` add `rejected_by` int null  
  2024_11_04_131057_create_telegram_report_tasks_table .............................................................................................  
  ⇂ create table `telegram_report_tasks` (`id` bigint unsigned not null auto_increment primary key, `task_id` int null, `telegram_chat_id` varchar(255) null, `nas_link` varchar(255) null, `file_id` varchar(255) null, `mime_type` varchar(255) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_11_04_133859_alter_topic_to_telegram_chat_histories .........................................................................................  
  ⇂ alter table `telegram_chat_histories` add `topic` varchar(255) null  
  2024_11_04_142859_create_telegram_chat_commands_table ............................................................................................  
  ⇂ create table `telegram_chat_commands` (`id` bigint unsigned not null auto_increment primary key, `chat_id` varchar(255) not null, `command` varchar(255) not null, `status` tinyint(1) not null default '1', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_11_04_152011_alter_current_function_to_telegram_chat_commands ...............................................................................  
  ⇂ alter table `telegram_chat_commands` add `current_function` varchar(255) null  
  2024_11_05_103717_create_telegram_transactions_table .............................................................................................  
  ⇂ create table `telegram_transactions` (`id` bigint unsigned not null auto_increment primary key, `chat_id` varchar(255) not null, `message_id` varchar(255) not null, `identity` varchar(255) not null, `status` tinyint(1) not null default '1', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_11_06_034233_create_user_inventories_table ..................................................................................................  
  ⇂ create table `user_inventories` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `inventory_id` bigint unsigned not null, `employee_id` bigint unsigned not null, `quantity` tinyint not null default '1', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `user_inventories` add constraint `user_inventories_inventory_id_foreign` foreign key (`inventory_id`) references `inventory_items` (`id`) on delete cascade  
  ⇂ alter table `user_inventories` add constraint `user_inventories_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`) on delete cascade  
  2024_11_06_034723_alter_foreign_key_to_custom_inventory_details_table ............................................................................  

  2024_11_13_085941_create_employee_inventory_masters_table ........................................................................................  
  ⇂ create table `employee_inventory_masters` (`id` bigint unsigned not null auto_increment primary key, `employee_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_inventory_masters` add constraint `employee_inventory_masters_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`) on delete cascade  
  2024_11_13_090405_create_employee_inventory_items_table ..........................................................................................  
  ⇂ create table `employee_inventory_items` (`id` bigint unsigned not null auto_increment primary key, `employee_inventory_master_id` bigint unsigned not null, `inventory_item_id` bigint unsigned not null, `inventory_status` bigint unsigned not null default '1' comment '1 for active, 2 for disable', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_inventory_items` add constraint `employee_inventory_items_employee_inventory_master_id_foreign` foreign key (`employee_inventory_master_id`) references `employee_inventory_masters` (`id`) on delete cascade  
  ⇂ alter table `employee_inventory_items` add constraint `employee_inventory_items_inventory_item_id_foreign` foreign key (`inventory_item_id`) references `inventory_items` (`id`) on delete cascade  
  2024_11_13_095425_alter_custom_inventory_id_to_employee_inventory_masters_table ..................................................................  
  ⇂ alter table `employee_inventory_masters` add `custom_inventory_id` json null  
  2024_11_19_090708_alter_inventory_source_to_employee_inventory_items_table .......................................................................  
  ⇂ alter table `employee_inventory_items` add `inventory_source` enum('custom', 'inventory') not null  
  2024_11_19_100106_alter_inventory_source_id_to_employee_inventory_items_table ....................................................................  
  ⇂ alter table `employee_inventory_items` add `inventory_source_id` int not null default '0'  
  2024_11_22_162136_create_project_task_holds_table ................................................................................................  
  ⇂ create table `project_task_holds` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `project_task_id` bigint unsigned not null, `reason` varchar(255) not null, `hold_at` timestamp null, `end_at` timestamp null, `hold_by` int not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_holds` add constraint `project_task_holds_project_task_id_foreign` foreign key (`project_task_id`) references `project_tasks` (`id`) on delete cascade  
  2024_11_25_133340_create_nas_folder_creations_table ..............................................................................................  
  ⇂ create table `nas_folder_creations` (`id` bigint unsigned not null auto_increment primary key, `project_name` varchar(255) not null, `project_id` int not null, `folder_path` json not null, `status` tinyint(1) not null default '1', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_12_02_125439_alter_type_to_nas_folder_creations_table .......................................................................................  
  ⇂ alter table `nas_folder_creations` add `type` enum('create', 'update', 'delete') not null default 'create'  
  2024_12_03_162537_alter_names_to_nas_folder_creations_table ......................................................................................  
  ⇂ alter table `nas_folder_creations` add `last_folder_name` json not null  
  ⇂ alter table `nas_folder_creations` add `current_folder_name` varchar(255) null  
  2024_12_05_104304_create_telegram_sessions_table .................................................................................................  
  ⇂ create table `telegram_sessions` (`id` bigint unsigned not null auto_increment primary key, `chat_id` varchar(255) not null, `value` varchar(255) not null, `status` tinyint(1) not null default '1', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_12_05_135941_alter_response_detail_to_nas_folder_creations_table ............................................................................  
  ⇂ alter table `nas_folder_creations` add `server_response` json null  
  ⇂ alter table `nas_folder_creations` add `failed_reason` varchar(255) null  
  ⇂ alter table `nas_folder_creations` add `current_path` json null  
  2024_12_09_130433_create_project_logs_table ......................................................................................................  
  ⇂ create table `project_logs` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `message` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_logs` add constraint `project_logs_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  2024_12_10_154704_remove_foreign_key_in_nas_folder_creations_table ...............................................................................  
  ⇂ select exists(select * from `information_schema`.`KEY_COLUMN_USAGE` where `TABLE_NAME` = 'nas_folder_creations' and `COLUMN_NAME` = 'project_id' and `TABLE_SCHEMA` = 'erp_testing_new') as `exists`  
  2024_12_18_103342_create_branches_table ..........................................................................................................  
  ⇂ create table `branches` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `short_name` varchar(50) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_12_18_103459_alter_branch_id_to_employees_table .............................................................................................  
  ⇂ alter table `employees` add `branch_id` int unsigned null  
  2024_12_19_154733_create_interactive_images_table ................................................................................................  
  ⇂ create table `interactive_images` (`id` bigint unsigned not null auto_increment primary key, `identifier` varchar(255) not null, `qrcode` varchar(255) not null, `filepath` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2024_12_21_184745_change_religion_type_in_employees_table ........................................................................................  
  ⇂ alter table `employees` modify `religion` enum('katholik', 'islam', 'kristen', 'budha', 'hindu', 'konghucu') not null  
  2025_01_03_085214_alter_task_identifier_id_to_project_tasks_model ................................................................................  
  ⇂ alter table `project_tasks` add `task_identifier_id` varchar(4) null  
  ⇂ alter table `project_tasks` add unique `project_tasks_task_identifier_id_unique`(`task_identifier_id`)  
  2025_01_06_161214_alter_additional_ptkp_and_more_to_employees_table ..............................................................................  
  ⇂ alter table `employees` add `ptkp_status` varchar(5) null  
  ⇂ alter table `employees` add `basic_salary` decimal(20, 2) not null default '0'  
  ⇂ alter table `employees` add `salary_type` enum('month', 'daily') not null  
  ⇂ alter table `employees` drop `dependant`  
  ⇂ alter table `employees` drop `placement`  
  ⇂ alter table `employees` drop `company_name`  
  2025_01_08_093140_modify_employees_table .........................................................................................................  
  ⇂ alter table `employees` modify `place_of_birth` varchar(255) null  
  ⇂ alter table `employees` modify `postal_code` varchar(6) null  
  ⇂ alter table `employees` modify `education` enum('smp', 'sma', 'smk', 'diploma', 's1', 's2', 's3') null  
  2025_01_08_125029_alter_is_residence_same_to_employees_table .....................................................................................  
  ⇂ alter table `employees` add `is_residence_same` tinyint(1) not null default '0'  
  2025_01_09_095044_alter_deleted_at_to_users_table ................................................................................................  
  ⇂ alter table `users` add `deleted_at` timestamp null  
  2025_01_15_095500_modify_employee_families_table .................................................................................................  
  ⇂ alter table `employee_families` drop `relation`  
  ⇂ alter table `employee_families` add `relationship` enum('father', 'mother', 'sibling', 'child', 'other') not null  
  ⇂ alter table `employee_families` add `address` varchar(255) null  
  ⇂ alter table `employee_families` add `religion` varchar(255) null  
  ⇂ alter table `employee_families` add `martial_status` varchar(255) null  
  ⇂ alter table `employee_families` modify `id_number` varchar(16) null  
  2025_01_20_123623_create_project_song_lists_table ................................................................................................  
  ⇂ create table `project_song_lists` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `project_id` bigint unsigned not null, `name` varchar(255) not null, `is_request_edit` tinyint(1) not null default '0', `is_request_delete` tinyint(1) not null default '0', `created_by` bigint not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_song_lists` add constraint `project_song_lists_project_id_foreign` foreign key (`project_id`) references `projects` (`id`)  
  2025_01_21_092321_create_entertainment_task_songs_table ..........................................................................................  
  ⇂ create table `entertainment_task_songs` (`id` bigint unsigned not null auto_increment primary key, `project_song_list_id` bigint unsigned not null, `status` enum('1', '2', '3', '4', '5', '6') not null, `employee_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `entertainment_task_songs` add constraint `entertainment_task_songs_project_song_list_id_foreign` foreign key (`project_song_list_id`) references `project_song_lists` (`id`) on delete cascade  
  ⇂ alter table `entertainment_task_songs` add constraint `entertainment_task_songs_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`)  
  2025_01_21_105453_alter_is_permanent_to_roles_table ..............................................................................................  
  ⇂ alter table `roles` add `is_permanent` tinyint(1) not null default '0'  
  2025_01_22_055649_alter_target_name_to_project_song_lists_table ..................................................................................  
  ⇂ alter table `project_song_lists` add `target_name` varchar(255) null  
  2025_01_24_100450_alter_project_id_to_entertainment_task_songs_table .............................................................................  
  ⇂ alter table `entertainment_task_songs` add `project_id` bigint unsigned not null  
  ⇂ alter table `entertainment_task_songs` add constraint `entertainment_task_songs_project_id_foreign` foreign key (`project_id`) references `projects` (`id`)  
  2025_01_24_134938_create_entertainment_task_song_logs_table ......................................................................................  
  ⇂ create table `entertainment_task_song_logs` (`id` bigint unsigned not null auto_increment primary key, `project_song_list_id` bigint unsigned not null, `entertainment_task_song_id` bigint unsigned not null, `project_id` bigint unsigned null, `text` text not null, `employee_id` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `entertainment_task_song_logs` add constraint `entertainment_task_song_logs_project_song_list_id_foreign` foreign key (`project_song_list_id`) references `project_song_lists` (`id`) on delete cascade  
  ⇂ alter table `entertainment_task_song_logs` add constraint `entertainment_task_song_logs_entertainment_task_song_id_foreign` foreign key (`entertainment_task_song_id`) references `entertainment_task_songs` (`id`) on delete cascade  
  2025_01_25_103148_modify_text_in_entertainment_task_song_logs_table ..............................................................................  
  ⇂ alter table `entertainment_task_song_logs` modify `text` varchar(255) not null  
  ⇂ alter table `entertainment_task_song_logs` add `param_text` json null  
  2025_01_30_135745_remove_task_relation_in_entertainment_task_song_logs_table .....................................................................  
  ⇂ select exists(select * from `information_schema`.`KEY_COLUMN_USAGE` where `TABLE_NAME` = 'entertainment_task_song_logs' and `COLUMN_NAME` = 'entertainment_task_song_id' and `TABLE_SCHEMA` = 'erp_testing_new') as `exists`  
  ⇂ alter table `entertainment_task_song_logs` modify `entertainment_task_song_id` bigint not null default '0'  
  2025_02_01_105558_alter_reason_to_project_song_lists_table .......................................................................................  
  ⇂ alter table `project_song_lists` add `reason` varchar(255) null  
  2025_02_06_105948_alter_time_tracker_in_entertainment_task_songs_table ...........................................................................  
  ⇂ alter table `entertainment_task_songs` add `time_tracker` json null comment 'will be like: [{type: \'start_working\', start_time: \'2025-01-10 10:00\', \'end_time\': null}]. Type will be start_working, start_revise'  
  2025_02_06_134007_create_entertainment_task_song_results_table ...................................................................................  
  ⇂ create table `entertainment_task_song_results` (`id` bigint unsigned not null auto_increment primary key, `task_id` bigint unsigned not null, `nas_path` varchar(255) not null, `employee_id` bigint unsigned not null, `note` varchar(255) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `entertainment_task_song_results` add constraint `entertainment_task_song_results_task_id_foreign` foreign key (`task_id`) references `entertainment_task_songs` (`id`) on delete cascade  
  2025_02_06_134014_create_entertainment_task_song_result_images_table .............................................................................  
  ⇂ create table `entertainment_task_song_result_images` (`id` bigint unsigned not null auto_increment primary key, `result_id` bigint unsigned not null, `path` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `entertainment_task_song_result_images` add constraint `entertainment_task_song_result_images_result_id_foreign` foreign key (`result_id`) references `entertainment_task_song_results` (`id`) on delete cascade  
  2025_02_07_131831_change_status_column_type_in_entertainment_task_songs_table ....................................................................  
  ⇂ alter table `entertainment_task_songs` modify `status` tinyint not null  
  2025_02_08_152031_create_employee_points_table ...................................................................................................  
  ⇂ create table `employee_points` (`id` bigint unsigned not null auto_increment primary key, `employee_id` bigint unsigned not null, `point` int not null default '0', `additional_point` int not null default '0', `project_id` bigint not null, `task_type` enum('production', 'entertainment') not null, `task_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_points` add constraint `employee_points_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`) on delete cascade  
  2025_02_13_100146_create_entertainment_task_song_revises_table ...................................................................................  
  ⇂ create table `entertainment_task_song_revises` (`id` bigint unsigned not null auto_increment primary key, `project_song_list_id` bigint unsigned not null, `entertainment_task_song_id` bigint unsigned not null, `reason` varchar(255) not null, `images` json null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_02_13_131632_change_code_column_in_indonesia_provinces_table ................................................................................  
  ⇂ select exists(select * from `information_schema`.`KEY_COLUMN_USAGE` where `TABLE_NAME` = 'indonesia_cities' and `COLUMN_NAME` = 'province_code' and `TABLE_SCHEMA` = 'erp_testing_new') as `exists`  
  ⇂ alter table `indonesia_provinces` modify `code` varchar(10) not null  
  ⇂ alter table `indonesia_cities` modify `province_code` varchar(10) not null  
  2025_02_15_164931_refactor_employee_points_table .................................................................................................  
  ⇂ select exists(select * from `information_schema`.`KEY_COLUMN_USAGE` where `TABLE_NAME` = 'employee_points' and `COLUMN_NAME` = 'employee_id' and `TABLE_SCHEMA` = 'erp_testing_new') as `exists`  
  ⇂ drop table if exists `employee_points`  
  ⇂ create table `employee_points` (`id` bigint unsigned not null auto_increment primary key, `employee_id` bigint unsigned not null, `total_point` int not null default '1', `additional_point` int not null default '1', `type` enum('entertainment', 'production') not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_points` add constraint `employee_points_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`)  
  2025_02_15_165226_create_employee_point_details_table ............................................................................................  
  ⇂ create table `employee_point_details` (`id` bigint unsigned not null auto_increment primary key, `employee_point_id` bigint unsigned not null, `task_id` bigint unsigned not null, `point` int not null, `type` enum('entertainment', 'production') not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_point_details` add constraint `employee_point_details_employee_point_id_foreign` foreign key (`employee_point_id`) references `employee_points` (`id`) on delete cascade  
  2025_02_19_131926_final_refactor_employee_points_table ...........................................................................................  
  ⇂ SET FOREIGN_KEY_CHECKS=0;  
  ⇂ select exists(select * from `information_schema`.`KEY_COLUMN_USAGE` where `TABLE_NAME` = 'employee_points' and `COLUMN_NAME` = 'employee_id' and `TABLE_SCHEMA` = 'erp_testing_new') as `exists`  
  ⇂ select index_name as `name`, group_concat(column_name order by seq_in_index) as `columns`, index_type as `type`, not non_unique as `unique` from information_schema.statistics where table_schema = 'erp_testing_new' and table_name = 'employee_points' group by index_name, index_type, non_unique  
  ⇂ drop table if exists `employee_points`  
  ⇂ create table `employee_points` (`id` bigint unsigned not null auto_increment primary key, `employee_id` bigint unsigned not null, `total_point` int not null comment 'This is a global total point for each employee', `type` enum('production', 'entertainment') not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_points` add constraint `employee_points_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`)  
  ⇂ SET FOREIGN_KEY_CHECKS=1;  
  2025_02_19_135250_create_employee_point_projects_table ...........................................................................................  
  ⇂ create table `employee_point_projects` (`id` bigint unsigned not null auto_increment primary key, `employee_point_id` bigint unsigned not null, `project_id` bigint unsigned not null, `total_point` int not null comment 'point + additional point', `additional_point` int not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_point_projects` add constraint `employee_point_projects_employee_point_id_foreign` foreign key (`employee_point_id`) references `employee_points` (`id`) on delete cascade  
  2025_02_19_135251_create_employee_point_project_details_table ....................................................................................  
  ⇂ create table `employee_point_project_details` (`id` bigint unsigned not null auto_increment primary key, `point_id` bigint unsigned not null, `task_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_point_project_details` add constraint `employee_point_project_details_point_id_foreign` foreign key (`point_id`) references `employee_point_projects` (`id`) on delete cascade  
  2025_03_06_121125_create_employee_task_states_table ..............................................................................................  
  ⇂ create table `employee_task_states` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `project_task_id` bigint unsigned not null, `project_board_id` bigint unsigned not null, `employee_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_03_07_132840_create_banks_table .............................................................................................................  
  ⇂ create table `banks` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `bank_code` tinyint not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_03_08_095306_create_division_backups_table ..................................................................................................  
  ⇂ create table `division_backups` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `parent_id` int null, `uid` char(36) not null, `created_by` int null, `updated_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_03_08_095319_create_position_backups_table ..................................................................................................  
  ⇂ create table `position_backups` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `name` varchar(255) not null, `division_id` bigint unsigned not null, `created_by` int null, `updated_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_03_08_104941_create_job_levels_table ........................................................................................................  
  ⇂ create table `job_levels` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `uid` char(36) not null, `created_by` int null, `updated_by` int null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_03_08_111132_alter_job_level_id_to_employees_table ..........................................................................................  
  ⇂ alter table `employees` add `job_level_id` bigint unsigned null  
  2025_03_08_124602_alter_is_sync_with_talenta_to_employees_table ..................................................................................  
  ⇂ alter table `employees` add `is_sync_with_talenta` tinyint(1) not null default '0'  
  2025_03_08_132724_modify_level_staff_column_in_employees_table ...................................................................................  
  ⇂ alter table `employees` modify `level_staff` varchar(255) null  
  2025_03_15_001117_alter_avatar_color_to_employees_table ..........................................................................................  
  ⇂ alter table `employees` add `avatar_color` varchar(255) null  
  2025_03_19_093546_alter_talenta_user_id_to_employees_table .......................................................................................  
  ⇂ alter table `employees` add `talenta_user_id` varchar(100) null  
  2025_03_21_100330_change_salary_column_type_in_employees_table ...................................................................................  
  ⇂ alter table `employees` modify `salary_type` tinyint not null  
  2025_03_22_115114_change_position_foreign_in_employees_table .....................................................................................  
  ⇂ select exists(select * from `information_schema`.`KEY_COLUMN_USAGE` where `TABLE_NAME` = 'employees' and `COLUMN_NAME` = 'position_id' and `TABLE_SCHEMA` = 'erp_testing_new') as `exists`  
  ⇂ alter table `employees` add constraint `employees_position_id_foreign` foreign key (`position_id`) references `position_backups` (`id`)  
  2025_04_10_143717_create_employee_active_reports_table ...........................................................................................  
  ⇂ create table `employee_active_reports` (`id` bigint unsigned not null auto_increment primary key, `month` tinyint not null, `year` year not null, `number_of_employee` int not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_04_11_112517_create_employee_timeoffs_table .................................................................................................  
  ⇂ create table `employee_timeoffs` (`id` bigint unsigned not null auto_increment primary key, `time_off_id` bigint not null comment 'This data came from Talenta server', `talenta_user_id` bigint null, `policy_name` varchar(255) null comment 'This data came from Talenta server', `request_type` varchar(100) null comment 'This data came from Talenta server', `file_url` varchar(255) null comment 'This data came from Talenta server', `start_date` date null comment 'This data came from Talenta server', `end_date` date null comment 'This data came from Talenta server', `status` varchar(100) null comment 'This data came from Talenta server', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_04_16_110007_alter_is_modeler_task_to_project_tasks_table ...................................................................................  
  ⇂ alter table `project_tasks` add `is_modeler_task` tinyint(1) not null default '0' comment 'This column is to detect this task is assign to modeler team or not'  
  2025_04_24_123438_alter_more_configuration_to_employees_table ....................................................................................  
  ⇂ alter table `employees` add `tax_configuration` varchar(255) null  
  ⇂ alter table `employees` add `employee_tax_status` varchar(255) null  
  ⇂ alter table `employees` add `salary_configuration` varchar(255) null  
  ⇂ alter table `employees` add `jht_configuration` varchar(255) null  
  ⇂ alter table `employees` add `jp_configuration` varchar(255) null  
  ⇂ alter table `employees` add `overtime_status` varchar(255) null  
  ⇂ alter table `employees` add `bpjs_kesehatan_config` varchar(255) null  
  2025_04_24_162307_create_employee_resigns_table ..................................................................................................  
  ⇂ create table `employee_resigns` (`id` bigint unsigned not null auto_increment primary key, `employee_id` bigint unsigned null, `reason` text not null, `resign_date` date not null, `severance` decimal(20, 2) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `employee_resigns` add constraint `employee_resigns_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`) on delete set null  
  2025_05_23_134801_create_quotation_items_table ...................................................................................................  
  ⇂ create table `quotation_items` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_05_23_134821_create_customers_table .........................................................................................................  
  ⇂ create table `customers` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `phone` varchar(20) not null, `email` varchar(255) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_05_23_134837_create_project_led_settings_table ..............................................................................................  
  ⇂ create table `project_led_settings` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_05_24_142408_create_price_led_guides_table ..................................................................................................  
  ⇂ create table `price_led_guides` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `country_id` bigint null, `state_id` bigint null, `city_id` bigint null, `price` decimal(24, 2) not null default '0', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_06_01_221713_create_project_deals_table .....................................................................................................  
  ⇂ create table `project_deals` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `client_portal` varchar(255) null, `project_date` date not null, `customer_id` bigint unsigned not null, `event_type` enum('wedding', 'engagement', 'event', 'birthday', 'concert', 'corporate', 'exhibition') not null, `venue` varchar(255) not null, `collaboration` varchar(255) null, `note` text null, `led_area` double not null default '0', `led_detail` json null, `country_id` bigint null, `state_id` bigint null, `city_id` bigint null, `project_class_id` bigint unsigned not null, `longitude` varchar(255) null, `latitude` varchar(255) null, `equipment_type` enum('lasika', 'others') not null, `is_high_season` tinyint(1) not null, `status` tinyint not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_deals` add constraint `project_deals_customer_id_foreign` foreign key (`customer_id`) references `customers` (`id`)  
  ⇂ alter table `project_deals` add constraint `project_deals_project_class_id_foreign` foreign key (`project_class_id`) references `project_classes` (`id`)  
  2025_06_01_223053_create_project_deal_marketings_table ...........................................................................................  
  ⇂ create table `project_deal_marketings` (`id` bigint unsigned not null auto_increment primary key, `project_deal_id` bigint unsigned not null, `employee_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_deal_marketings` add constraint `project_deal_marketings_project_deal_id_foreign` foreign key (`project_deal_id`) references `project_deals` (`id`)  
  ⇂ alter table `project_deal_marketings` add constraint `project_deal_marketings_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`)  
  2025_06_01_223353_create_project_quotations_table ................................................................................................  
  ⇂ create table `project_quotations` (`id` bigint unsigned not null auto_increment primary key, `project_deal_id` bigint unsigned not null, `main_ballroom` decimal(24, 0) not null default '0', `prefunction` decimal(24, 0) not null default '0', `high_season_fee` decimal(24, 0) not null default '0', `equipment_fee` decimal(24, 0) not null default '0', `sub_total` decimal(24, 0) not null default '0', `maximum_discount` decimal(24, 0) not null default '0', `total` decimal(24, 0) not null default '0', `maximum_markup_price` decimal(24, 0) not null default '0', `fix_price` decimal(24, 0) not null default '0', `quotation_id` varchar(255) not null, `is_final` tinyint(1) not null default '0', `event_location_guide` varchar(255) null, `equipment_type` enum('lasika', 'others') not null, `is_high_season` tinyint(1) not null default '0', `description` text null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_quotations` add constraint `project_quotations_project_deal_id_foreign` foreign key (`project_deal_id`) references `project_deals` (`id`)  
  2025_06_01_223913_create_project_quotation_items_table ...........................................................................................  
  ⇂ create table `project_quotation_items` (`id` bigint unsigned not null auto_increment primary key, `quotation_id` bigint unsigned not null, `item_id` bigint unsigned not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_quotation_items` add constraint `project_quotation_items_quotation_id_foreign` foreign key (`quotation_id`) references `project_quotations` (`id`)  
  ⇂ alter table `project_quotation_items` add constraint `project_quotation_items_item_id_foreign` foreign key (`item_id`) references `quotation_items` (`id`)  
  2025_06_11_111804_create_transactions_table ......................................................................................................  
  ⇂ create table `transactions` (`id` bigint unsigned not null auto_increment primary key, `uid` char(36) not null, `project_deal_id` bigint unsigned not null, `customer_id` bigint unsigned not null, `payment_amount` decimal(24, 2) not null, `reference` varchar(255) null, `note` varchar(255) null, `trx_id` varchar(255) not null, `transaction_date` timestamp not null, `created_by` bigint unsigned null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `transactions` add constraint `transactions_project_deal_id_foreign` foreign key (`project_deal_id`) references `project_deals` (`id`)  
  ⇂ alter table `transactions` add constraint `transactions_customer_id_foreign` foreign key (`customer_id`) references `customers` (`id`)  
  ⇂ alter table `transactions` add constraint `transactions_created_by_foreign` foreign key (`created_by`) references `users` (`id`)  
  2025_06_11_120055_alter_is_fully_paid_to_project_deals_table .....................................................................................  
  ⇂ alter table `project_deals` add `is_fully_paid` tinyint(1) not null default '0' comment 'Define this project has been paid off or not'  
  2025_06_12_092729_create_transaction_images_table ................................................................................................  
  ⇂ create table `transaction_images` (`id` bigint unsigned not null auto_increment primary key, `transaction_id` bigint unsigned not null, `image` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `transaction_images` add constraint `transaction_images_transaction_id_foreign` foreign key (`transaction_id`) references `transactions` (`id`) on delete cascade  
  2025_06_20_140046_create_report_tokens_table .....................................................................................................  
  ⇂ create table `report_tokens` (`id` bigint unsigned not null auto_increment primary key, `user_id` bigint unsigned not null, `last_used_at` timestamp null, `access_token` text null, `refresh_token` text null, `created_at` timestamp not null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `report_tokens` add constraint `report_tokens_user_id_foreign` foreign key (`user_id`) references `users` (`id`) on delete cascade  
  2025_06_20_140102_create_report_token_histories_table ............................................................................................  
  ⇂ create table `report_token_histories` (`id` bigint unsigned not null auto_increment primary key, `user_id` bigint unsigned not null, `access_token` text null, `refresh_token` text null, `created_at` timestamp not null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `report_token_histories` add constraint `report_token_histories_user_id_foreign` foreign key (`user_id`) references `users` (`id`) on delete cascade  
  2025_06_24_085057_alter_design_job_to_project_quotations_table ...................................................................................  
  ⇂ alter table `project_quotations` add `design_job` varchar(100) null after `description`  
  2025_06_24_113314_alter_soft_delelets_to_quotation_items_table ...................................................................................  
  ⇂ select column_name as `name`, data_type as `type_name`, column_type as `type`, collation_name as `collation`, is_nullable as `nullable`, column_default as `default`, column_comment as `comment`, generation_expression as `expression`, extra as `extra` from information_schema.columns where table_schema = 'erp_testing_new' and table_name = 'quotation_items' order by ordinal_position asc  
  ⇂ alter table `quotation_items` add `deleted_at` timestamp null  
  2025_06_26_142647_alter_transaction_type_to_transactions_table ...................................................................................  
  ⇂ alter table `transactions` add `transaction_type` enum('down_payment', 'credit', 'repayment') null after `transaction_date`  
  2025_06_27_005340_alter_identifier_number_to_project_deals_table .................................................................................  
  ⇂ alter table `project_deals` add `identifier_number` varchar(100) null after `is_fully_paid`  
  ⇂ alter table `project_deals` add unique `project_deals_identifier_number_unique`(`identifier_number`)  
  2025_06_27_011025_alter_soft_deletes_to_project_deals_table ......................................................................................  
  ⇂ alter table `project_deals` add `deleted_at` timestamp null  
  2025_06_28_164425_create_invoices_table ..........................................................................................................  
  ⇂ create table `invoices` (`id` bigint unsigned not null auto_increment primary key, `amount` decimal(24, 2) not null default '0', `paid_amount` decimal(24, 2) not null default '0', `payment_date` timestamp not null, `payment_due` timestamp not null, `project_deal_id` bigint unsigned not null, `customer_id` bigint unsigned not null, `status` enum('1', '2', '3') not null, `raw_data` json null, `parent_number` varchar(100) null, `number` varchar(100) not null, `is_main` tinyint(1) not null default '0', `sequence` tinyint not null comment 'Sequence identifier for child invoice', `created_by` bigint unsigned null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `invoices` add constraint `invoices_project_deal_id_foreign` foreign key (`project_deal_id`) references `project_deals` (`id`)  
  ⇂ alter table `invoices` add constraint `invoices_customer_id_foreign` foreign key (`customer_id`) references `customers` (`id`)  
  ⇂ alter table `invoices` add constraint `invoices_created_by_foreign` foreign key (`created_by`) references `users` (`id`) on delete set null  
  2025_07_02_112642_create_project_metas_table .....................................................................................................  
  ⇂ create table `project_metas` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `teams_meta` json null comment 'Structure will be like: [{\"pic_id\": number, \"teams\": [number,number], \"team_transfer\": [number,number]}]', `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_metas` add constraint `project_metas_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  2025_07_02_125359_alter_invoice_id_to_transactions_table .........................................................................................  
  ⇂ alter table `transactions` add `invoice_id` bigint unsigned null  
  ⇂ alter table `transactions` add constraint `transactions_invoice_id_foreign` foreign key (`invoice_id`) references `invoices` (`id`) on delete cascade  
  2025_07_08_112605_create_project_task_duration_histories_table ...................................................................................  
  ⇂ create table `project_task_duration_histories` (`id` bigint unsigned not null auto_increment primary key, `project_id` bigint unsigned not null, `task_id` bigint unsigned not null, `pic_id` bigint unsigned not null, `task_duration` bigint not null, `pm_approval_duration` bigint null, `task_type` enum('cross_team_collaboration', 'single_assignee', 'temporary_transfer', 'split_assignment') not null, `is_task_revised` tinyint(1) not null default '0', `is_task_deadline_updated` tinyint(1) not null default '0', `created_at` timestamp not null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_duration_histories` add constraint `project_task_duration_histories_project_id_foreign` foreign key (`project_id`) references `projects` (`id`) on delete cascade  
  ⇂ alter table `project_task_duration_histories` add constraint `project_task_duration_histories_task_id_foreign` foreign key (`task_id`) references `project_tasks` (`id`) on delete cascade  
  ⇂ alter table `project_task_duration_histories` add constraint `project_task_duration_histories_pic_id_foreign` foreign key (`pic_id`) references `employees` (`id`) on delete cascade  
  2025_07_12_110532_create_deadline_change_reasons_table ...........................................................................................  
  ⇂ create table `deadline_change_reasons` (`id` bigint unsigned not null auto_increment primary key, `name` varchar(255) not null, `created_at` timestamp null, `updated_at` timestamp null, `deleted_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  2025_07_12_124541_create_project_task_deadlines_table ............................................................................................  
  ⇂ create table `project_task_deadlines` (`id` bigint unsigned not null auto_increment primary key, `project_task_id` bigint unsigned not null, `employee_id` bigint unsigned not null, `deadline` timestamp not null, `actual_finish_time` timestamp null, `is_first_deadline` tinyint(1) not null default '0', `due_reason` bigint unsigned null, `updated_by` bigint unsigned not null, `custom_reason` varchar(255) null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_task_deadlines` add constraint `project_task_deadlines_project_task_id_foreign` foreign key (`project_task_id`) references `project_tasks` (`id`) on delete cascade  
  ⇂ alter table `project_task_deadlines` add constraint `project_task_deadlines_employee_id_foreign` foreign key (`employee_id`) references `employees` (`id`)  
  ⇂ alter table `project_task_deadlines` add constraint `project_task_deadlines_due_reason_foreign` foreign key (`due_reason`) references `deadline_change_reasons` (`id`)  
  ⇂ alter table `project_task_deadlines` add constraint `project_task_deadlines_updated_by_foreign` foreign key (`updated_by`) references `users` (`id`)  
  2025_07_21_213222_create_invoice_request_updates_table ...........................................................................................  
  ⇂ create table `invoice_request_updates` (`id` bigint unsigned not null auto_increment primary key, `invoice_id` bigint unsigned not null, `amount` decimal(24, 2) null, `payment_date` date null, `status` enum('1', '2', '3') not null, `request_by` bigint unsigned null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `invoice_request_updates` add constraint `invoice_request_updates_invoice_id_foreign` foreign key (`invoice_id`) references `invoices` (`id`) on delete cascade  
  ⇂ alter table `invoice_request_updates` add constraint `invoice_request_updates_request_by_foreign` foreign key (`request_by`) references `users` (`id`)  
  2025_07_23_020835_alter_uid_to_invoices_table ....................................................................................................  
  ⇂ alter table `invoices` add `uid` char(36) null after `id`  
  2025_07_23_140308_alter_more_information_in_invoice_request_updates_table ........................................................................  
  ⇂ alter table `invoice_request_updates` add `approved_by` bigint null after `request_by`  
  ⇂ alter table `invoice_request_updates` add `rejected_by` bigint null after `approved_by`  
  ⇂ alter table `invoice_request_updates` add `reason` text null after `rejected_by`  
  ⇂ alter table `invoice_request_updates` add `approved_at` timestamp null after `reason`  
  ⇂ alter table `invoice_request_updates` add `rejected_at` timestamp null after `approved_at`  
  2025_07_24_145530_alter_modify_enum_in_invoices_table ............................................................................................  
  ⇂ alter table `invoices` modify `status` enum('1', '2', '3') not null  
  2025_07_25_143232_alter_modify_enum_column_in_invoice_request_updates_table ......................................................................  
  ⇂ alter table `invoice_request_updates` modify `status` enum('1', '2', '3') not null default '2'  
  2025_07_26_094758_alter_is_down_payment_to_invoices_table ........................................................................................  
  ⇂ alter table `invoices` add `is_down_payment` tinyint(1) not null default '0' comment 'Define this invoice is down payment or not' after `status`  
  ⇂ select id,number,parent_number,is_main from `invoices` where `is_main` = 0 and `parent_number` is not null order by `created_at` asc  
  2025_08_01_053549_create_export_import_results_table .............................................................................................  
  ⇂ create table `export_import_results` (`id` bigint unsigned not null auto_increment primary key, `area` varchar(100) not null, `description` varchar(255) not null, `message` longtext not null, `user_id` bigint unsigned null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `export_import_results` add constraint `export_import_results_user_id_foreign` foreign key (`user_id`) references `users` (`id`) on delete cascade  
  2025_08_01_144624_alter_cancel_reason_to_project_deals_table .....................................................................................  
  ⇂ alter table `project_deals` add `cancel_reason` varchar(255) null after `is_fully_paid`  
  ⇂ alter table `project_deals` add `cancel_at` timestamp null  
  ⇂ alter table `project_deals` add `cancel_by` bigint unsigned null  
  ⇂ alter table `project_deals` add constraint `project_deals_cancel_by_foreign` foreign key (`cancel_by`) references `users` (`id`)  
  2025_08_03_213808_alter_project_deal_id_to_projects_table ........................................................................................  
  ⇂ alter table `projects` add `project_deal_id` bigint unsigned null  
  ⇂ alter table `projects` add constraint `projects_project_deal_id_foreign` foreign key (`project_deal_id`) references `project_deals` (`id`) on update set null  
  ⇂ select id,name,project_date from `project_deals` where `status` = 1 and `project_deals`.`deleted_at` is null  
  2025_08_04_232152_create_project_deal_changes_table ..............................................................................................  
  ⇂ create table `project_deal_changes` (`id` bigint unsigned not null auto_increment primary key, `project_deal_id` bigint unsigned not null, `detail_changes` json not null comment 'Will be JSON format. Json will be like this [{\"field\": \"project_date\", \"old_value\": \"\", \"new_value\": \"\", \"label\": \"\"}]', `requested_by` bigint unsigned null, `requested_at` timestamp null, `approval_by` bigint unsigned null, `approval_at` timestamp null, `status` enum('1', '2', '3') not null, `created_at` timestamp null, `updated_at` timestamp null) default character set utf8mb4 collate 'utf8mb4_unicode_ci'  
  ⇂ alter table `project_deal_changes` add constraint `project_deal_changes_project_deal_id_foreign` foreign key (`project_deal_id`) references `project_deals` (`id`) on delete cascade  
  ⇂ alter table `project_deal_changes` add constraint `project_deal_changes_requested_by_foreign` foreign key (`requested_by`) references `users` (`id`)  
  ⇂ alter table `project_deal_changes` add constraint `project_deal_changes_approval_by_foreign` foreign key (`approval_by`) references `users` (`id`)  
  2025_08_05_155524_alter_reject_detail_to_project_deal_changes_table ..............................................................................  
  ⇂ alter table `project_deal_changes` add `rejected_by` bigint unsigned null  
  ⇂ alter table `project_deal_changes` add constraint `project_deal_changes_rejected_by_foreign` foreign key (`rejected_by`) references `users` (`id`)  
  ⇂ alter table `project_deal_changes` add `rejected_at` timestamp null  
  2025_08_09_104432_create_get_highest_event_number_pic_procedures_in_employees_table ..............................................................  
  ⇂ DROP PROCEDURE IF EXISTS get_highest_event_number_for_pic  
  ⇂ DROP PROCEDURE IF EXISTS get_highest_event_number_for_pic; CREATE PROCEDURE get_highest_event_number_for_pic(IN status_filter VARCHAR(100)) BEGIN DECLARE where_clause VARCHAR(1000); -- Build the WHERE clause for status filtering IF status_filter IS NOT NULL AND status_filter != '' THEN SET where_clause = CONCAT('AND e.status NOT IN (', status_filter, ')'); ELSE SET where_clause = ''; END IF; -- Create a temporary table to store the top_pic_id DROP TEMPORARY TABLE IF EXISTS temp_top_pic; CREATE TEMPORARY TABLE temp_top_pic (id INT); -- First get the top PIC ID with status filter SET @sql = CONCAT(' INSERT INTO temp_top_pic SELECT pic_id FROM project_person_in_charges t JOIN employees e ON t.pic_id = e.id WHERE t.created_at >= DATE_FORMAT(CURRENT_DATE, "%Y-01-01") AND t.created_at <= CURRENT_DATE ', where_clause, ' GROUP BY pic_id ORDER BY COUNT(DISTINCT project_id) DESC LIMIT 1; '); PREPARE stmt FROM @sql; EXECUTE stmt; DEALLOCATE PREPARE stmt; -- Then get all projects for this PIC in current year with the same status filter SET @sql = CONCAT(' SELECT e.uid AS pic_id, e.name AS pic_name, COUNT(DISTINCT t.project_id) AS project_count, GROUP_CONCAT(DISTINCT t.project_id) AS project_ids FROM project_person_in_charges t JOIN employees e ON t.pic_id = e.id WHERE t.pic_id = (SELECT COALESCE(id, 0) FROM temp_top_pic LIMIT 1) AND t.created_at >= DATE_FORMAT(CURRENT_DATE, "%Y-01-01") AND t.created_at <= CURRENT_DATE ', where_clause, ' GROUP BY e.id, e.name; '); PREPARE stmt FROM @sql; EXECUTE stmt; DEALLOCATE PREPARE stmt; -- Clean up DROP TEMPORARY TABLE IF EXISTS temp_top_pic; END  
  2025_08_09_135242_create_get_project_difference_procedure_to_projects_table ......................................................................  
  ⇂ CREATE PROCEDURE get_project_difference() BEGIN DECLARE total_current_year INT DEFAULT 0; DECLARE total_last_year INT DEFAULT 0; DECLARE number_diff INT DEFAULT 0; DECLARE percentage_diff DECIMAL(10,2) DEFAULT 0; SELECT COUNT(*) INTO total_current_year FROM projects WHERE YEAR(created_at) = YEAR(CURDATE()); SELECT COUNT(*) INTO total_last_year FROM projects WHERE YEAR(created_at) = YEAR(CURDATE()) - 1; SET number_diff = total_current_year - total_last_year; IF total_last_year > 0 THEN SET percentage_diff = (number_diff / total_last_year) * 100; ELSE SET percentage_diff = 0; END IF; SELECT percentage_diff AS percentage_difference, number_diff AS number_difference; END  
  2025_08_09_142707_create_event_success_rate_procedure_to_finance_table ...........................................................................  
  ⇂ CREATE PROCEDURE get_event_success_rate() BEGIN DECLARE total_events INT DEFAULT 0; DECLARE total_final INT DEFAULT 0; DECLARE total_cancel INT DEFAULT 0; DECLARE decided_events INT DEFAULT 0; DECLARE success_rate DECIMAL(10,2) DEFAULT 0; DECLARE fail_rate DECIMAL(10,2) DEFAULT 0; SELECT COUNT(*) INTO total_events FROM project_deals WHERE YEAR(project_date) = YEAR(CURDATE()); SELECT COUNT(*) INTO total_final FROM project_deals WHERE status = 1 AND YEAR(project_date) = YEAR(CURDATE()); SELECT COUNT(*) INTO total_cancel FROM project_deals WHERE status = 3 AND YEAR(project_date) = YEAR(CURDATE()); SET decided_events = total_final + total_cancel; IF decided_events > 0 THEN SET success_rate = (total_final / decided_events) * 100; SET fail_rate = (total_cancel / decided_events) * 100; ELSE SET success_rate = 0; SET fail_rate = 0; END IF; SELECT total_events, total_final, total_cancel, success_rate, fail_rate; END  
  2025_08_12_090040_create_get_event_class_distribution_sp_in_projects_table .......................................................................  
  ⇂ DROP PROCEDURE IF EXISTS get_event_class_distribution  
  ⇂ CREATE PROCEDURE get_event_class_distribution() BEGIN SELECT pc.name AS class_name, COUNT(p.id) AS project_count FROM project_classes pc LEFT JOIN projects p ON pc.id = p.project_class_id AND YEAR(p.project_date) = YEAR(CURDATE()) GROUP BY pc.id, pc.name ORDER BY pc.name; END  
  2025_08_12_104627_alert_new_version_event_success_rate_to_finance_table ..........................................................................  
  ⇂ DROP PROCEDURE IF EXISTS get_event_success_rate  
  ⇂ CREATE PROCEDURE get_event_success_rate() BEGIN DECLARE total_events INT DEFAULT 0; DECLARE total_final INT DEFAULT 0; DECLARE total_cancel INT DEFAULT 0; DECLARE decided_events INT DEFAULT 0; DECLARE success_rate DECIMAL(10,2) DEFAULT 0; DECLARE fail_rate DECIMAL(10,2) DEFAULT 0; SELECT COUNT(*) INTO total_events FROM project_deals WHERE YEAR(project_date) = YEAR(CURDATE()); SELECT COUNT(*) INTO total_final FROM project_deals WHERE status = 1 AND YEAR(project_date) = YEAR(CURDATE()); SELECT COUNT(*) INTO total_cancel FROM project_deals WHERE status = 3 AND YEAR(project_date) = YEAR(CURDATE()); SET decided_events = total_final + total_cancel; -- Calculate rates based on TOTAL EVENTS IF total_events > 0 THEN SET success_rate = (total_final / total_events) * 100; SET fail_rate = (total_cancel / total_events) * 100; ELSE SET success_rate = 0; SET fail_rate = 0; END IF; SELECT total_events, total_final, total_cancel, decided_events, success_rate, fail_rate, (total_events - decided_events) AS pending_events, ROUND(((total_events - decided_events) / total_events) * 100, 2) AS pending_rate; END  
  2025_08_12_120335_update_project_difference_sp_to_projects_table .................................................................................  
  ⇂ DROP PROCEDURE IF EXISTS get_project_difference  
  ⇂ CREATE PROCEDURE get_project_difference() BEGIN DECLARE total_current_year INT DEFAULT 0; DECLARE total_last_year INT DEFAULT 0; DECLARE number_diff INT DEFAULT 0; DECLARE percentage_diff DECIMAL(10,2) DEFAULT 0; SELECT COUNT(*) INTO total_current_year FROM projects WHERE YEAR(created_at) = YEAR(CURDATE()); SELECT COUNT(*) INTO total_last_year FROM projects WHERE YEAR(created_at) = YEAR(CURDATE()) - 1; SET number_diff = total_current_year - total_last_year; IF total_last_year > 0 THEN SET percentage_diff = (number_diff / total_last_year) * 100; ELSE SET percentage_diff = 0; END IF; SELECT percentage_diff AS percentage_difference, number_diff AS number_difference, total_current_year AS total_event_current_year, total_last_year AS total_event_last_year; END  

